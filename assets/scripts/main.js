const schForm=document.querySelector(".top-menu form"),schInput=schForm.querySelector("input");schInput.style.display="none",schForm.querySelector("button").onclick=()=>{schInput.style.display="none"===schInput.style.display?"inline-block":"none",document.querySelector(".top-cart").style.display="none"===schInput.style.display?"block":"none"};const toggle=document.querySelector("#toggle"),toggleBtn=document.querySelector(".toggle-btn[for='toggle']");toggle.addEventListener("input",(e=>{e.target.checked?toggleBtn.innerHTML="<I class='fas fa-times'></i>":toggleBtn.textContent="☰"})),document.documentElement.addEventListener("mousedown",(()=>{document.getElementById("toggle").checked=!1,document.querySelector("[for='toggle']").textContent="☰"}));const tb=".eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZnZ2xxdXllcGJienJkem1rcGZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwOTkyMjksImV4cCI6MjA3NDY3NTIyOX0.mT03kocvd2gMLu6y4VeYXQqcBKUPD5DKtku6HrRO7cA",schInp=document.querySelector(".top-menu form input"),comm=document.querySelector(".product"),proCard=comm.querySelectorAll(".card");proCard.forEach((e=>{const t=e.querySelector(".product-describe");e&&(e.querySelector(".buttons a").href=`#search?q=${encodeURIComponent(t.innerHTML.match(/#[\w-]+/)||"")}`,t.innerHTML=t.innerHTML.replace(/\#([\w\-]+)/g,"<a href='#search?q=$1' class='card-tag'>#$1</a>"),t.querySelectorAll(".card-tag").forEach((e=>{e.style.cssText='color: var(--primary-color);\n          font-family: "ADLaM Display", monospace;\n          text-decoration: none;'})))}));let noMatch=document.querySelector("#noMatch");noMatch||(noMatch=document.createElement("p"),noMatch.id="noMatch",noMatch.innerHTML='<img src="/assets/images/20250918_223801.png" width="40" height="40" style="margin-top: 10px;animation:spin-bor 2s ease-in-out infinite;border-radius: 50%;border: 1px solid var(--primary-color);border-right: 0;"><a href=""><button>Refresh</button></a> No matching results found.',noMatch.style.display="none",comm.appendChild(noMatch)),schInp.addEventListener("input",(()=>{filterCrips(schInp.value.trim().toUpperCase())})),processSearchFromURL(),window.addEventListener("hashchange",processSearchFromURL),document.querySelector(".top-menu form").addEventListener("submit",(e=>{e.preventDefault(),filterCrips(document.querySelector(".top-menu form input").value.toUpperCase())}));const cartBox=document.querySelector(".cart-items"),topCartBtn=document.querySelector(".top-menu .top-btn.top-cart"),icon=topCartBtn.querySelector("i");cartBox.classList.add("collapsed"),cartBox.style.display="none",topCartBtn.addEventListener("click",(()=>{cartBox.classList.contains("collapsed")?(cartBox.classList.remove("collapsed"),cartBox.style.display="block",icon.classList.replace("fa-shopping-cart","fa-times")):(cartBox.classList.add("collapsed"),cartBox.style.display="none",icon.classList.replace("fa-times","fa-shopping-cart"))})),document.addEventListener("keydown",(e=>{"Escape"!==e.key||cartBox.classList.contains("collapsed")||(cartBox.classList.add("collapsed"),cartBox.style.display="none",icon.classList.replace("fa-times","fa-shopping-cart"))})),cartBox.addEventListener("click",(function(e){e.target.closest(".remove")||e.target.closest(".checkout-btn")||e.target.closest("#currency-select")||e.target.closest("#paypal-button-container")||(cartBox.classList.toggle("collapsed"),icon.classList.replace("fa-times","fa-shopping-cart"))}));const ta="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",themeToggle=document.getElementById("theme-toggle");"dark"===localStorage.getItem("theme")&&document.documentElement.classList.add("dark-theme");const tc=ta+tb,te="s";themeToggle.addEventListener("click",(function(){document.documentElement.classList.toggle("dark-theme"),document.documentElement.classList.contains("dark-theme")?localStorage.setItem("theme","dark"):localStorage.setItem("theme","light")})),document.getElementById("sideSearch").addEventListener("keyup",(e=>{"Enter"===e.key&&(window.location.href="#search?q="+encodeURIComponent(e.target.value))}));const td="https://fgglquyepbbzrdzmkpfd.supabase.co";function initializeTheme(){const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;"dark"===(e||(t?"dark":"light"))?document.documentElement.classList.add("dark-theme"):document.documentElement.classList.remove("dark-theme")}function toggleReport(){const e=document.getElementById("reportForm");e.style.display="flex"===e.style.display?"none":"flex"}function filterCrips(e){window.pageYOffset>=50&&window.scrollTo({top:0,behavior:"smooth"});const t=document.querySelectorAll(".product .card");let o=!1;t.forEach((t=>{t.innerText.toUpperCase().includes(e)?(t.style.display="",o=!0):t.style.display="none"})),noMatch.style.display=o?"none":"block",schInput.style.display=schInput.style.display="inline-block",document.querySelector(".top-cart").style.display="none"}function processSearchFromURL(){document.querySelector(".search-loader").style.display="flex",setTimeout((()=>{let e=new URLSearchParams(window.location.search).get("q");if(!e){const t=window.location.hash;if(t.startsWith("#search")){const o=t.split("?")[1];if(o){e=new URLSearchParams(o).get("q")}}}e&&(document.querySelector(".top-menu form input").value=decodeURIComponent(e),filterCrips(e.trim().toUpperCase())),document.querySelector(".search-loader").style.display="none"}),1500)}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{localStorage.getItem("theme")||initializeTheme()})),schForm.querySelector("button").addEventListener("click",(e=>{window.pageYOffset>=50&&window.scrollTo({top:0,behavior:"smooth"})})),document.getElementById("reportForm").addEventListener("submit",(async function(e){e.preventDefault();const t=e.target,o=new FormData(t);try{(await fetch("https://formspree.io/f/xqadrken",{method:"POST",body:o,headers:{Accept:"application/json"}})).ok?(cAlert("Report submitted for "+document.getElementById("popupName").textContent),t.reset(),t.state.display="none"):cAlert("Sorry, we couldn’t send your message. Please try again in a moment.")}catch(e){cAlert("⚠️ Network error. The message may be delivered to the admins")}})),document.getElementById("topSch").addEventListener("invalid",(function(){this.setCustomValidity("Enter to search")})),document.getElementById("topSch").addEventListener("input",(function(){this.setCustomValidity("")}));
