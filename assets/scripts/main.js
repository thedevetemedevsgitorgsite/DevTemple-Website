const schForm=document.querySelector(".top-menu form"),schInput=schForm.querySelector("input");schInput.style.display="none",schForm.querySelector("button").onclick=()=>{schInput.style.display="none"===schInput.style.display?"inline-block":"none",document.querySelector(".cart-items").style.display="none"===schInput.style.display?"block":"none"};const toggle=document.querySelector("#toggle"),toggleBtn=document.querySelector("[for='toggle']");toggle.addEventListener("input",(e=>{e.target.checked?toggleBtn.innerHTML="<I class='fas fa-times'></i>":toggleBtn.textContent="☰"}));const tb=".eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZnZ2xxdXllcGJienJkem1rcGZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwOTkyMjksImV4cCI6MjA3NDY3NTIyOX0.mT03kocvd2gMLu6y4VeYXQqcBKUPD5DKtku6HrRO7cA";document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".top-menu form input"),t=document.querySelector(".product");t.querySelectorAll(".card").forEach((e=>{const t=e.querySelector(".product-describe");e&&(e.querySelector(".buttons a").href=`#search?q=${encodeURIComponent(t.innerHTML.match(/#[\w-]+/)||"")}`,t.innerHTML=t.innerHTML.replace(/\#([\w\-]+)/g,"<a href='#search?q=$1' class='card-tag'>#$1</a>"),t.querySelectorAll(".card-tag").forEach((e=>{e.style.cssText='color: var(--primary-color);\n          font-family: "ADLaM Display", monospace;\n          text-decoration: none;'})))}));let o=document.querySelector("#noMatch");function n(e){window.pageYOffset>=50&&window.scrollTo({top:0,behavior:"smooth"});const n=t.querySelectorAll(".card");let c=!1;n.forEach((t=>{t.innerText.toUpperCase().includes(e)?(t.style.display="",c=!0):t.style.display="none"})),o.style.display=c?"none":"block"}function c(){document.querySelector(".search-loader").style.display="flex",setTimeout((()=>{let t=new URLSearchParams(window.location.search).get("q");if(!t){const e=window.location.hash;if(e.startsWith("#search")){const o=e.split("?")[1];if(o){t=new URLSearchParams(o).get("q")}}}t&&(e.value=decodeURIComponent(t),n(t.trim().toUpperCase())),document.querySelector(".search-loader").style.display="none"}),1500)}o||(o=document.createElement("p"),o.id="noMatch",o.innerHTML='<img src="/assets/images/20250918_223801.png" width="40" height="40" style="margin-top: 10px;animation:spin-bor 2s ease-in-out infinite;border-radius: 50%;border: 1px solid var(--primary-color);border-right: 0;"><a href=""><button>Refresh</button></a> No matching results found.',o.style.display="none",t.appendChild(o)),e.addEventListener("input",(()=>{n(e.value.trim().toUpperCase())})),c(),window.addEventListener("hashchange",c),document.querySelector(".top-menu form").addEventListener("submit",(e=>{e.preventDefault(),n(document.querySelector(".top-menu form input").value.toUpperCase())}));const r=document.querySelector(".cart-items");r.classList.add("collapsed"),r.addEventListener("click",(function(e){e.target.closest(".remove")||e.target.closest(".checkout-btn")||e.target.closest("#currency-select")||e.target.closest("#paypal-button-container")||r.classList.toggle("collapsed")}))}));const ta="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",themeToggle=document.getElementById("theme-toggle");"dark"===localStorage.getItem("theme")&&document.documentElement.classList.add("dark-theme");const tc=ta+tb,te="s";themeToggle.addEventListener("click",(function(){document.documentElement.classList.toggle("dark-theme"),document.documentElement.classList.contains("dark-theme")?localStorage.setItem("theme","dark"):localStorage.setItem("theme","light")})),document.getElementById("sideSearch").addEventListener("keyup",(e=>{"Enter"===e.key&&(window.location.href="#search?q="+encodeURIComponent(e.target.value))}));const td="https://fgglquyepbbzrdzmkpfd.supabase.co";function initializeTheme(){const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;"dark"===(e||(t?"dark":"light"))?document.documentElement.classList.add("dark-theme"):document.documentElement.classList.remove("dark-theme")}function toggleReport(){const e=document.getElementById("reportForm");e.style.display="flex"===e.style.display?"none":"flex"}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{localStorage.getItem("theme")||initializeTheme()})),schForm.querySelector("button").addEventListener("click",(e=>{window.pageYOffset>=50&&window.scrollTo({top:0,behavior:"smooth"})})),document.getElementById("reportForm").addEventListener("submit",(async function(e){e.preventDefault();const t=e.target,o=new FormData(t);try{(await fetch("https://formspree.io/f/xqadrken",{method:"POST",body:o,headers:{Accept:"application/json"}})).ok?(cAlert("Report submitted for "+document.getElementById("popupName").textContent),t.reset(),t.state.display="none"):cAlert("Sorry, we couldn’t send your message. Please try again in a moment.")}catch(e){cAlert("⚠️ Network error.")}})),document.getElementById("topSch").addEventListener("invalid",(function(){this.setCustomValidity("Enter to search")})),document.getElementById("topSch").addEventListener("input",(function(){this.setCustomValidity("")}));
