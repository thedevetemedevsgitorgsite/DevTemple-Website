if(window.location.href.includes("convert")){const e=document.getElementById("sidebar"),t=document.getElementById("sidebarToggle"),n=document.getElementById("overlay");function toggleSidebar(){e.classList.toggle("active"),n.classList.toggle("active"),t.classList.toggle("active")}t.addEventListener("click",toggleSidebar),n.addEventListener("click",toggleSidebar);const o=document.getElementById("file-input"),d=document.getElementById("upload-section"),a=document.getElementById("converter-section"),r=document.getElementById("preview-image"),c=document.getElementById("file-name"),l=document.getElementById("reset-btn"),s=document.querySelectorAll(".format-buttons button"),i=document.getElementById("convert-btn"),u=document.getElementById("quality-box"),m=document.getElementById("quality-range"),g=document.getElementById("quality-value"),h=document.getElementById("download-section"),v=document.getElementById("download-btn");let E=null,y="png",L=null;o.addEventListener("change",(e=>{const t=e.target.files[0];if(!t||!t.type.startsWith("image/"))return;E=t;const n=new FileReader;n.onload=e=>{r.src=e.target.result},n.readAsDataURL(t),c.textContent=t.name,d.classList.add("hidden"),a.classList.remove("hidden"),h.classList.add("hidden")})),l.addEventListener("click",(()=>{o.value="",E=null,L=null,a.classList.add("hidden"),d.classList.remove("hidden"),h.classList.add("hidden")})),s.forEach((e=>{e.addEventListener("click",(()=>{s.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),y=e.dataset.format,u.classList.toggle("hidden","png"===y),h.classList.add("hidden")}))})),m.addEventListener("input",(()=>{g.textContent=m.value})),i.addEventListener("click",(()=>{if(!E)return;i.textContent="Converting...",i.disabled=!0;const e=new Image;e.src=r.src,e.onload=()=>{const t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.width,t.height=e.height,n.drawImage(e,0,0);const o=`image/${y}`,d="png"===y?1:m.value/100;t.toBlob((e=>{L=URL.createObjectURL(e),h.classList.remove("hidden"),i.textContent="Convert Image",i.disabled=!1}),o,d)}})),v.addEventListener("click",(()=>{if(!L)return;const e=document.createElement("a");e.href=L;const t=E.name.split(".").slice(0,-1).join(".")||"converted";e.download=t+"."+y,e.click()}))}else if(window.location.href.includes("color")){const p=(e,t,n)=>Math.max(t,Math.min(n,e));function rgbToHex(e,t,n){return"#"+[e,t,n].map((e=>e.toString(16).padStart(2,"0"))).join("")}function hexToRgb(e){3===(e=e.replace("#","")).length&&(e=e.split("").map((e=>e+e)).join(""));const t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}function rgbToHsl(e,t,n){e/=255,t/=255,n/=255;const o=Math.max(e,t,n),d=Math.min(e,t,n);let a,r,c=(o+d)/2;if(o===d)a=r=0;else{const l=o-d;switch(r=c>.5?l/(2-o-d):l/(o+d),o){case e:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-e)/l+2;break;case n:a=(e-t)/l+4}a/=6}return[Math.round(360*a),Math.round(100*r),Math.round(100*c)]}function hslToRgb(e,t,n){let o,d,a;if(e/=360,n/=100,0===(t/=100))o=d=a=n;else{const r=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),c=n<.5?n*(1+t):n+t-n*t,l=2*n-c;o=r(l,c,e+1/3),d=r(l,c,e),a=r(l,c,e-1/3)}return[Math.round(255*o),Math.round(255*d),Math.round(255*a)]}const w=document.getElementById("svCanvas"),f=document.getElementById("hueCanvas"),b=w.getContext("2d"),I=f.getContext("2d"),B=document.getElementById("colorInput"),H=document.getElementById("hexInput"),x=document.getElementById("rgbInput"),C=document.getElementById("hslInput"),S=document.getElementById("rgbaInput"),T=document.getElementById("previewBox"),k=document.getElementById("addToPalette"),R=document.getElementById("history"),M=document.getElementById("extractedPalette"),F=document.getElementById("extractedCount"),V=document.getElementById("imageFile"),$=document.getElementById("uploadCard"),U=document.getElementById("generated");document.getElementById("themeToggle");let G=217,j=80,A=60,O=1;function drawHue(){const e=I.createLinearGradient(0,0,0,f.height);for(let t=0;t<=360;t+=10)e.addColorStop(t/360,`hsl(${t},100%,50%)`);I.fillStyle=e,I.fillRect(0,0,f.width,f.height)}function drawSV(e){const t=w.width,n=w.height;b.fillStyle=`hsl(${e},100%,50%)`,b.fillRect(0,0,t,n);const o=b.createLinearGradient(0,0,t,0);o.addColorStop(0,"#fff"),o.addColorStop(1,"rgba(255,255,255,0)"),b.fillStyle=o,b.fillRect(0,0,t,n);const d=b.createLinearGradient(0,0,0,n);d.addColorStop(0,"rgba(0,0,0,0)"),d.addColorStop(1,"#000"),b.fillStyle=d,b.fillRect(0,0,t,n)}function updateFromHSV(){const e=G/360,t=j/100,n=A/100;let o,d,a;const r=Math.floor(6*e),c=6*e-r,l=n*(1-t),s=n*(1-c*t),i=n*(1-(1-c)*t);switch(r%6){case 0:o=n,d=i,a=l;break;case 1:o=s,d=n,a=l;break;case 2:o=l,d=n,a=i;break;case 3:o=l,d=s,a=n;break;case 4:o=i,d=l,a=n;break;case 5:o=n,d=l,a=s}o=Math.round(255*o),d=Math.round(255*d),a=Math.round(255*a);const u=rgbToHex(o,d,a);B.value=u,H.value=u,x.value=`rgb(${o}, ${d}, ${a})`;const[m,g,h]=rgbToHsl(o,d,a);C.value=`hsl(${m}, ${g}%, ${h}%)`,S.value=`rgba(${o}, ${d}, ${a}, ${O})`,T.style.background=u,T.textContent=u.toUpperCase()}function handleHueEvent(e){const t=f.getBoundingClientRect(),n=p((e.touches?e.touches[0].clientY:e.clientY)-t.top,0,t.height)/t.height;G=Math.round(360*n),drawSV(G),updateFromHSV()}function handleSvEvent(e){const t=w.getBoundingClientRect(),n=p((e.touches?e.touches[0].clientX:e.clientX)-t.left,0,t.width),o=p((e.touches?e.touches[0].clientY:e.clientY)-t.top,0,t.height);j=Math.round(n/t.width*100),A=Math.round(100*(1-o/t.height)),updateFromHSV()}function loadHistory(){const e=localStorage.getItem("devtem_colors");return e?JSON.parse(e):[]}function saveHistory(e){localStorage.setItem("devtem_colors",JSON.stringify(e))}function renderHistory(){R.innerHTML="";loadHistory().forEach((e=>{const t=document.createElement("div");t.className="item",t.style.background=e,t.title=e,t.addEventListener("click",(()=>{setColorFromHex(e)})),R.appendChild(t)}))}function pushHistory(e){let t=loadHistory();t=t.filter((t=>t.toLowerCase()!==e.toLowerCase())),t.unshift(e),t.length>12&&(t=t.slice(0,12)),saveHistory(t),renderHistory()}function setColorFromHex(e){const[t,n,o]=hexToRgb(e),d=rgbToHsl(t,n,o);G=d[0],j=d[1],A=d[2],drawSV(G),updateFromHSV()}function generateTriadic(e){const[t,n,o]=hexToRgb(e),d=rgbToHsl(t,n,o),a=d[0],r=[e];for(let e=1;e<3;e++){const t=(a+120*e)%360,[n,o,c]=hslToRgb(t,d[1],d[2]);r.push(rgbToHex(n,o,c))}return r}function generateAnalogous(e){const[t,n,o]=hexToRgb(e),d=rgbToHsl(t,n,o),a=d[0],r=[];for(let e=-2;e<=2;e++){const t=(a+20*e+360)%360,[n,o,c]=hslToRgb(t,d[1],p(d[2]+4*e,0,100));r.push(rgbToHex(n,o,c))}return r}function generateComplementary(e){const[t,n,o]=hexToRgb(e),d=rgbToHsl(t,n,o),a=(d[0]+180)%360,[r,c,l]=hslToRgb(a,d[1],d[2]);return[e,rgbToHex(r,c,l)]}function renderGenerated(e){U.innerHTML="",e.forEach((e=>{const t=document.createElement("div");t.className="swatch",t.style.background=e,t.textContent=e.replace("#","").toUpperCase(),t.title=e,t.addEventListener("click",(()=>setColorFromHex(e))),U.appendChild(t)}))}function extractColorsFromImage(e,t=6){const n=document.createElement("canvas"),o=n.getContext("2d");let d=e.naturalWidth,a=e.naturalHeight;if(Math.max(d,a)>200){const e=200/Math.max(d,a);d=Math.round(d*e),a=Math.round(a*e)}n.width=d,n.height=a,o.drawImage(e,0,0,d,a);const r=o.getImageData(0,0,d,a).data,c={};for(let e=0;e<r.length;e+=4){const t=r[e],n=r[e+1],o=r[e+2];if(r[e+3]<125)continue;const d=(t>>4&15)<<8|(n>>4&15)<<4|o>>4&15;c[d]=(c[d]||0)+1}return Object.entries(c).sort(((e,t)=>t[1]-e[1])).slice(0,t).map((([e])=>{const t=parseInt(e);return rgbToHex((t>>8&15)<<4,(t>>4&15)<<4,(15&t)<<4)}))}drawHue(),drawSV(G),updateFromHSV(),f.addEventListener("mousedown",(e=>{handleHueEvent(e);const t=e=>handleHueEvent(e),n=()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)};window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)})),f.addEventListener("touchstart",(e=>{handleHueEvent(e);const t=e=>handleHueEvent(e),n=()=>{window.removeEventListener("touchmove",t),window.removeEventListener("touchend",n)};window.addEventListener("touchmove",t),window.addEventListener("touchend",n)})),w.addEventListener("mousedown",(e=>{handleSvEvent(e);const t=e=>handleSvEvent(e),n=()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)};window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)})),w.addEventListener("touchstart",(e=>{handleSvEvent(e);const t=e=>handleSvEvent(e),n=()=>{window.removeEventListener("touchmove",t),window.removeEventListener("touchend",n)};window.addEventListener("touchmove",t),window.addEventListener("touchend",n)})),B.addEventListener("input",(e=>{const t=e.target.value,[n,o,d]=hexToRgb(t),a=rgbToHsl(n,o,d);G=a[0],j=a[1],A=a[2],drawSV(G),updateFromHSV()})),H.addEventListener("change",(e=>{let t=e.target.value.trim();t.startsWith("#")||(t="#"+t);try{const[e,n,o]=hexToRgb(t),d=rgbToHsl(e,n,o);G=d[0],j=d[1],A=d[2],drawSV(G),updateFromHSV()}catch(e){console.error("Invalid hex value")}})),document.querySelectorAll(".copy-btn").forEach((e=>e.addEventListener("click",(async()=>{const t=e.dataset.copy;let n="";"hex"===t&&(n=H.value),"rgb"===t&&(n=x.value),"hsl"===t&&(n=C.value),"rgba"===t&&(n=S.value);try{await navigator.clipboard.writeText(n),e.textContent="Copied",setTimeout((()=>e.textContent="Copy"),900)}catch(e){alert("Copy failed â€” try manually")}})))),document.getElementById("copyHexLarge").addEventListener("click",(()=>{navigator.clipboard.writeText(H.value).then((()=>alert("HEX copied")))})),document.getElementById("copyRgbLarge").addEventListener("click",(()=>{navigator.clipboard.writeText(x.value).then((()=>alert("RGB copied")))})),document.getElementById("clearHistory").addEventListener("click",(()=>{localStorage.removeItem("devtem_colors"),renderHistory()})),renderHistory(),k.addEventListener("click",(()=>{pushHistory(H.value)})),document.getElementById("generateTriadic").addEventListener("click",(()=>{renderGenerated(generateTriadic(H.value))})),document.getElementById("generateAnalogous").addEventListener("click",(()=>{renderGenerated(generateAnalogous(H.value))})),document.getElementById("generateComplementary").addEventListener("click",(()=>{renderGenerated(generateComplementary(H.value))})),V.addEventListener("change",(e=>{const t=e.target.files[0];if(!t)return;const n=URL.createObjectURL(t),o=new Image;o.crossOrigin="Anonymous",o.onload=function(){const e=extractColorsFromImage(o,8);M.innerHTML="",e.forEach((e=>{const t=document.createElement("div");t.className="swatch",t.style.background=e,t.textContent="",t.title=e,t.addEventListener("click",(()=>{setColorFromHex(e),pushHistory(e)})),M.appendChild(t)})),F.textContent=e.length+" colors",URL.revokeObjectURL(n)},o.src=n})),$.addEventListener("click",(()=>V.click())),renderGenerated([H.value]);const q=document.getElementById("sidebarToggle"),N=document.getElementById("sidebar"),D=document.getElementById("overlay");q.addEventListener("click",(()=>{N.classList.toggle("active"),D.classList.toggle("active")})),D.addEventListener("click",(()=>{N.classList.remove("active"),D.classList.remove("active")})),renderHistory(),updateFromHSV()}else if(window.location.href.includes("compressor")){const W=document.getElementById("sidebar"),Y=document.getElementById("sidebarToggle"),_=document.getElementById("overlay");function toggleSidebar(){W.classList.toggle("active"),_.classList.toggle("active"),Y.classList.toggle("active")}Y.addEventListener("click",toggleSidebar),_.addEventListener("click",toggleSidebar);const P=document.getElementById("upload"),X=document.getElementById("upload-section"),J=document.getElementById("converter-section"),z=document.getElementById("file-name"),K=document.getElementById("download-section");document.getElementById("download-btn");function compressImage(){const e=document.getElementById("upload").files[0];if(!e)return void alert("Please upload an image first.");const t=new FileReader;t.onload=function(t){const n=new Image;n.onload=function(){const t=document.getElementById("canvas"),o=t.getContext("2d");t.width=n.width,t.height=n.height,o.drawImage(n,0,0);const d=t.toDataURL("image/jpeg",.5),a=document.getElementById("download-btn");a.href=d,a.download=`compressed_${e.name}`,K.classList.remove("hidden")},n.src=t.target.result},t.readAsDataURL(e)}P.addEventListener("change",(e=>{const t=e.target.files[0];t&&t.type.startsWith("image/")&&(z.textContent=t.name,X.classList.add("hidden"),J.classList.remove("hidden"),K.classList.add("hidden"))}))}else console.log(decodeURIComponent("%20page%20not%20found%20"));
